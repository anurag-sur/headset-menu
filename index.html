<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>AR Food Menu VR</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script src="https://aframe.io/releases/1.4.2/aframe.min.js"></script>

<script>
const foods = [
  { model: "burger/scene.gltf", name: "Burger", price: "₹149", scale: 0.4, color: "#D2691E" },
  { model: "pizza/scene.gltf", name: "Pizza", price: "₹299", scale: 2.0, color: "#FF6347" },
  { model: "fries/scene.gltf", name: "Fries", price: "₹99",  scale: 0.5, color: "#FFD700" },
  { model: "samosa/scene.gltf", name: "Samosa", price: "₹25",  scale: 0.6, color: "#C68642" },
  { model: "chole_bhature/scene.gltf", name: "Chole Bhature", price: "₹180", scale: 0.7, color: "#A0522D" },
  { model: "grilled_sandwich/scene.gltf", name: "Grilled Sandwich", price: "₹129", scale: 0.6, color: "#DEB887" },
  { model: "palak_paneer/scene.gltf", name: "Palak Paneer", price: "₹249", scale: 0.7, color: "#2E8B57" },
  { model: "potato_salad/scene.gltf", name: "Potato Salad", price: "₹119", scale: 0.6, color: "#F5DEB3" }
];

AFRAME.registerComponent("food-buttons", {
  init() {
    const panel = this.el;
    const cursor = document.querySelector("#cursor");
    const model = document.querySelector("#mainModel");
    const label = document.querySelector("#foodLabel");

    foods.forEach((food, i) => {
      const btn = document.createElement("a-plane");

      btn.setAttribute("class", "clickable");
      btn.setAttribute("width", "0.5");
      btn.setAttribute("height", "0.25");
      btn.setAttribute("color", food.color);
      btn.setAttribute("position", `${(i - 1) * 0.7} 0 0`);

      // Hover
      btn.addEventListener("mouseenter", () => {
        cursor.setAttribute("material", "color", food.color);
        btn.setAttribute("opacity", "0.8");
      });

      btn.addEventListener("mouseleave", () => {
        cursor.setAttribute("material", "color", "white");
        btn.setAttribute("opacity", "1");
      });

      // Click
      btn.addEventListener("click", () => {
        model.setAttribute("gltf-model", food.model);
        model.setAttribute("scale", `${food.scale} ${food.scale} ${food.scale}`);
        label.setAttribute("value", `${food.name} • ${food.price}`);
      });

      // Text
      const text = document.createElement("a-text");
      text.setAttribute("value", food.name);
      text.setAttribute("align", "center");
      text.setAttribute("color", "black");
      text.setAttribute("position", "0 0 0.01");
      text.setAttribute("width", "2");

      btn.appendChild(text);
      panel.appendChild(btn);
    });
  }
});
</script>
</head>

<body style="margin:0">

<a-scene background="color: #0b0b0b" vr-mode-ui="enabled:true">

  <!-- Camera + Cursor -->
  <a-entity camera look-controls position="0 1.6 0">
    <a-cursor
      id="cursor"
      raycaster="objects: .clickable"
      fuse="true"
      fuse-timeout="700"
      geometry="primitive:ring; radiusInner:0.015; radiusOuter:0.025"
      material="color:white; shader:flat">
    </a-cursor>
  </a-entity>

  <!-- Lights -->
  <a-light type="ambient" intensity="0.7"></a-light>
  <a-light type="directional" position="2 5 3" intensity="1"></a-light>

  <!-- Food Model -->
  <a-entity
    id="mainModel"
    gltf-model="burger/scene.gltf"
    position="0 1.2 -3"
    scale="0.4 0.4 0.4"
    animation="property: rotation; to: 0 360 0; loop:true; dur:14000">
  </a-entity>

  <!-- Name + Price -->
  <a-text
    id="foodLabel"
    value="Burger • ₹149"
    position="0 2.3 -2.5"
    align="center"
    color="white"
    width="4">
  </a-text>

  <!-- Buttons -->
  <a-entity position="0 0.9 -1.5" food-buttons></a-entity>

  <a-sky color="#111"></a-sky>

</a-scene>
</body>
</html>
